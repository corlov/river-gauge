Компоненты системы:
1) микроконтроллер на базе ESP32
    Малое энергопотребление
    https://www.ozon.ru/product/modul-plata-esp32-s3-devkitc-1-type-c-1956181506/?at=16tL3mZKnfNj7Qq3HVG7gwpTGVLGmJS1gZLW6Tmlzq38&from_sku=1956181506&oos_search=false
    Цена: 600 

2) датчик давления жидкости
    Пока самый неопределенный вариант что использовать
    YB2JF
        Нет документации как подключать, кажется хочет минимум 12В, что по энергопотребелению не ясно
        Цена: 2063
        
        https://market.yandex.ru/card/yb2jf-datchik-urovnya-zhidkosti-kabel-5-m-datchik-urovnya-vody-1232-v-postoyannogo-toka-420-ma-06-m/4678706948?
        do-waremd5=8qMB6qFjhBFKZouprUSGNA&ogV=-6#fullSpecsAnchorId

    MS5837 - именно он потому что есть готовые скетчи и библиотеки под него
        Цена 800 руб.
        https://www.ozon.ru/product/gy-ms5837-02ba-modul-datchika-davleniya-gaza-i-zhidkosti-vodonepronitsaemyy-gy-37-2910180682/?at=Y7tjMqQ7lH0mqXN7cKOWBo7tzLzKXvs8NM6MAUVg1Pqo

        Нужно герметизирвоать эпоксидкой, плата со сборкой не герметична
        Длина кабеля не более 1-2 метров кажется иначе сигнал не дойдет придетсся через палу сопляжения переходить на другой интерфейс или усиливать сигнал
        Это полвлечет усложнение и увелечение энергопотребеления
        Также этот датчик требует датчика атмосферного давления, т.к. дельта между ним и вторым датчком даст значение глубины воды
        Цена 2700
        https://www.ozon.ru/product/vysokotochnyy-datchik-davleniya-i-temperatury-gy-ms5803-01ba-s-interfeysom-i2c-620431324/

        Он же но в герметичном корпусе - стоит дорого около 4500
        https://aliexpress.ru/item/4000831166196.html?sku_id=12000039734291399

3) (опционально зависит от шага 2)
    BME280-5V
    Цена: 352 р
    https://www.ozon.ru/product/bme280-5v-modul-datchika-atmosfernogo-davleniya-temperatury-i-vlazhnosti-1568410177/?at=lRt6xKMDOfNZMNLzFPPlB7QhxE37L1COJ6Q8PTApZ8kA


4) SIM800l
    Цена 800 - он идет с антенной, шанс приема сильно выше
    https://www.ozon.ru/product/modul-sim800c-gsm-gprs-bluetooth-1454158423/?at=XQtk2gkvyhRLrmKQTXLnp4QfWnWPvqsrWqn74IV0DxKx
    Цена 400 
    https://www.ozon.ru/product/modul-sim800l-ampertok-gprs-gsm-1-sht-501797713/?at=Y7tjMZ9PkizZWx5lSwVN2vDSGW13ZYf0yNnoBsJqZJAm

    Возможно придется что-то более дорогое SIM7600 или A7670

        https://www.ozon.ru/product/modul-sim800c-gsm-gprs-bluetooth-1454158423/?at=XQtk2gkvyhRLrmKQTXLnp4QfWnWPvqsrWqn74IV0DxKx
        https://www.ozon.ru/product/gsm-gprs-modul-sim800l-v2-0-5v-s-antennoy-sma-621951425/?at=z6tO6yOlpcyWVJ0DsNAP8PXf6Lm2z8iORQ684uzMJJv2


5) Обвязка:
    Транзистор FQP27P06
        https://www.ozon.ru/product/tranzistor-fqp27p06-984532789/
    Транзистор BC547
    Провода
    Резисторы
    Конденсаторы
    Плата насверленого текстолита

6) Акумулаторная батарея морозостойкая  LiFePO4
Цена: 1500
https://www.ozon.ru/product/starternyy-akkumulyator-asterion-ct-1212-12v-12ah-150x86x131-agm-vrla-2169034723/?at=nRtrv2j6lTL7XGrOikXJZYVtzj5A7jCxWBoZfxq4kVx&from_sku=2868561585&oos_search=false


7) герметичный корпус под то что будет на берегу
8) якорь и корпус подводной части

9) RTC датчик
Итого:
    5500 + корпуса (не знаю сколько стоить будут)





--------------------------------------------
Устройство будет изготовлено на макетной плате THT-монтажем.
Состоит из платы с компонентами и одного датчика который будет лежать на дне реки.
Монтажэная плата в герментичном корпусе на берегу.
Устройство раз в 3 часа пробужатеся из глубогкого сна, отправляет в GPRS состояние датчикомв и время и уходи  в сон.
АКБ планируется взять морозостойкий LiFePO4 достоачный на год автономной работы или более.
Антенна будет выведена наружу корпуса через внешний разъем.
По сути это несколько готовых микросхем спаяных как единое устройство, я так пнимаю что  никакие особенно доп. резисторы и емкости не потребутся?
Но по управлению питанием см. п.6 придется кое что сделать и это больше всего вызывает вопросов. Нужно 2 схемки как описано вв п.6. для каждого собрать как я понял.

1) ESP32 контроллер 
https://www.ozon.ru/product/modul-plata-esp32-s3-devkitc-1-type-c-1956181506/

2) Аналоговый датчик уровня
https://www.ozon.ru/product/datchik-urovnya-yb2jf-kabel-5m-12-32v-dc-420ma-0-10m-2728550154/

3) Датчик атм. давления и температуры
https://www.ozon.ru/product/bme280-5v-modul-datchika-atmosfernogo-davleniya-temperatury-i-vlazhnosti-1568410177/

4) Модуль связи
https://www.ozon.ru/product/modul-gsm-gprs-sim800l-s-antennoy-933031795/

5) Часы
https://www.ozon.ru/product/avtonomnyy-modul-chasov-realnogo-vremeni-ds3231-s-batareykoy-2070627566/

6) Обвязка для подключения питания к модулю связи, к датчику глубины в приложеном документе (на датчик 12В питание, на моудль связи 4В)

7) Преобразователи напряжения DC-DC 12В - 5В, 12В - 4В
    https://www.ozon.ru/product/ponizhayushchiy-preobrazovatel-napryazheniya-gsmin-mp1584en-dc-dc-zelenyy-1412428185/?at=z6tO6k9ylc4V0153uo81mPkT1J7K9vhPOrjEkuRAgWLP

    либо
    
    https://www.ozon.ru/product/ponizhayushchiy-reguliruemyy-preobrazovatel-vhod-3-2-v-40-v-vyhod-1-25-35-v-dc-dc-lm2596s-1117783630/?at=57twEX4zmc5pERmTrWVVLBF6KkB3NTzn37M0IL4gn39

    
    




NPN-транзистор (например, 2N2222, BC547) — им управляет ESP32.
P-канальный MOSFET (например, IRLML6402, NDP6020P) — он уже коммутирует основное питание на SIM800L.

Q1 NPN: 2N2222, BC547, S8050.
Q2: IRF9540
R1: 1 кОм - 4.7 кОм.
R2: 10 кОм.
Конденсатор 470 мкФ или 1000 мкФ.

5В MP1584EN
4В LM2596.


https://www.ozon.ru/product/tranzistor-2n2222a-10sht-1709676501/?at=WPtNOMGQ7I2o4rW5iK2VnKYfn2VqLgcMGmLLF9qKEnM или https://www.ozon.ru/product/tranzistor-ss8050-s8050-to-92-50sht-1901285283/?at=jYtZ8BPwLFqY5MPpt7x5JNDhWr4270uOm8ymviGmWk6o или https://www.ozon.ru/product/bc547b-30sht-bipolyarnyy-tranzistor-npn-50v-0-1a-300mgts-korpus-to92-854814389/?at=MZtvXwWLKFX7O5vBflBrQ8PUwoBNyRsox3J30TMJVgqg

https://www.ozon.ru/product/irf9540-sfp9540-to220-metall-tranzistor-288702240/?at=MZtvXwWLKFoYpQAAfz4W9pOC0zD3G3tYv0mRxT402JDW

https://www.ozon.ru/product/ponizhayushchiy-preobrazovatel-napryazheniya-gsmin-mp1584en-dc-dc-zelenyy-1412428185/?at=z6tO6k9ylc4V0153uo81mPkT1J7K9vhPOrjEkuRAgWLP

https://www.ozon.ru/product/ponizhayushchiy-reguliruemyy-preobrazovatel-vhod-3-2-v-40-v-vyhod-1-25-35-v-dc-dc-lm2596s-1117783630/?at=57twEX4zmc5pERmTrWVVLBF6KkB3NTzn37M0IL4gn39






Мы будем делать так называемый "ключ по верхнему плечу" (high-side switch), то есть разрывать "плюс" питания, а не "землю". Это более правильная и безопасная схема. Для этого нам понадобится P-канальный MOSFET.

Однако есть нюанс: чтобы закрыть P-канальный MOSFET, на его затвор (Gate) нужно подать напряжение, равное напряжению на его истоке (Source), то есть наши ~4В. А ESP32 выдает только 3.3В. Этого может не хватить для надежного закрытия.

Поэтому мы используем простую, но железобетонную схему из двух транзисторов:

NPN-транзистор (например, 2N2222, BC547) — им управляет ESP32.
P-канальный MOSFET (например, IRLML6402, NDP6020P) — он уже коммутирует основное питание на SIM800L.
Схема подключения:
Логика работы:

Хотим включить SIM800L:

Подаем с пина ESP32 HIGH (3.3В) на резистор R1.
NPN-транзистор Q1 открывается.
Он "притягивает" затвор (Gate) P-канального MOSFET'а Q2 к земле (GND).
На затворе Q2 оказывается 0В, а на истоке (Source) +4В. Создается большая разница потенциалов, и MOSFET Q2 полностью открывается, подавая питание на SIM800L.
Хотим выключить SIM800L:

Подаем с пина ESP32 LOW (0В).
NPN-транзистор Q1 закрывается.
Резистор R2 "подтягивает" затвор (Gate) Q2 к истоку (Source), то есть к +4В.
Разница потенциалов между затвором и истоком Q2 становится равна нулю. MOSFET Q2 надежно закрывается, обесточивая SIM800L.
Какие компоненты взять:

Q1 (NPN): Любой маломощный NPN-транзистор. Самые популярные: 2N2222, BC547, S8050.
Q2 (P-MOSFET): Нужен с "логическим уровнем" (Logic-Level Gate), чтобы хорошо управлялся низким напряжением. И должен держать ток >2А. Отличные варианты: IRLML6402 (в SMD корпусе, но можно припаять на плату-переходник), NDP6020P, IRF9540 (последний — с большим запасом, в корпусе TO-220, удобен для макетки).
R1: 1 кОм - 4.7 кОм.
R2: 10 кОм.
Важно! Прямо на входе питания модуля SIM800L (между его VCC и GND) обязательно поставь электролитический или танталовый конденсатор большой ёмкости, например, 470 мкФ или 1000 мкФ. Он сгладит дикие скачки потребления тока и не даст просесть напряжению, из-за чего модуль может перезагружаться.

2. Выбор DC-DC преобразователей
Использовать линейные стабилизаторы (типа 7805) в твоем проекте — преступление против аккумулятора. Они будут просто греть воздух, сжигая драгоценную энергию. Нам нужны только импульсные понижающие DC-DC преобразователи (Buck Converters) с высоким КПД.

У тебя две линии питания:

12В -> 5В: для питания платы ESP32, датчика BME280 и часов DS3231.
12В -> ~4В: для питания SIM800L.
Рекомендую взять два отдельных модуля:

Для линии 5В (маломощная):

Идеальный вариант: Модуль на чипе MP1584EN. Они крошечные, очень эффективные (КПД >90%) и дешевые. Тока в 3А, который они могут отдать, тебе хватит с огромным запасом.
Пример на Ozon
Для линии 4В (мощная, для SIM800L):

Надежный вариант: Модуль на чипе LM2596. Они чуть крупнее и чуть менее эффективны, чем MP1584EN, но очень распространены, надежны и отлично справляются с током до 3А. Это классика для питания подобных модулей.
Пример на Ozon
Почему два отдельных преобразователя?
Чтобы скачки потребления SIM800L по линии 4В никак не влияли на стабильность питания 5В для микроконтроллера. Это сильно повысит надежность всей системы.

Итоговая схема питания будет выглядеть так:
АКБ LiFePO4 (12В) ---+---> [DC-DC на MP1584EN, настроенный на 5В] --+--> VIN на ESP32
                     |                                             +--> VCC на BME280
                     |                                             +--> VCC на DS3231
                     |
                     +---> [DC-DC на LM2596, настроенный на 4.0В] ---> [MOSFET-ключ] ---> VCC на SIM800L
И не забудь, что твой аналоговый датчик уровня тоже потребляет энергию. Его питание (12-32В) тоже стоит завести через подобный MOSFET-ключ, чтобы включать его только на время измерения. Управлять им можно с другого свободного пина ESP32 по точно такой же схеме.



                               +4.0V (от DC-DC преобразователя)
                                  |
                                  |
                                 | |
                              R2 | | 10 кОм
                                 | |
                                  |
         +------------------------+-----------+
         |                        |           | S (Source)
         |                        |       .---' Q2 (P-MOSFET)
         |                        |      |    .---.
         | G (Gate) o-------------+------'   (     )
         |                        |            `---'
         |                        | D (Drain)    |
         |                        |              |
         | C (Collector)          |              o------> VCC модуля SIM800L
 .-------' Q1 (NPN)               |              |
 |      .---.                     |              |
 |     (     )                    |             ---
 '------`---'                     |             --- C1 (470-1000 мкФ)
         | E (Emitter)            |              |
         |                        |              |
         +------------------------+--------------+------> GND (Общая земля)
         |
        ---
       |   | R1 (1 кОм)
       |   |
        ---
         |
         o------> Управляющий пин ESP32 (например, GPIO2)







                               +12V (напрямую от АКБ LiFePO4)
                                  |
                                  |
                                 | |
                              R4 | | 10 кОм
                                 | |
                                  |
         +------------------------+-----------+
         |                        |           | S (Source)
         |                        |       .---' Q4 (P-MOSFET)
         |                        |      |    .---.
         | G (Gate) o-------------+------'   (     )
         |                        |            `---'
         |                        | D (Drain)    |
         |                        |              |
         | C (Collector)          |              o------> Питание +V датчика уровня
 .-------' Q3 (NPN)               |
 |      .---.                     |
 |     (     )                    |
 '------`---'                     |
         | E (Emitter)            |
         |                        |
         +------------------------+--------------------> GND (Общая земля)
         |
        ---
       |   | R3 (1 кОм)
       |   |
        ---
         |
         o------> Другой управляющий пин ESP32 (например, GPIO4)
